{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap d06823076a60495f4278","webpack:///./src/BaseConnection.js","webpack:///(webpack)/buildin/global.js","webpack:///./~/event-target/min.js","webpack:///./~/url/url.js","webpack:///./~/punycode/punycode.js","webpack:///./~/querystring-es3/decode.js","webpack:///./~/querystring-es3/encode.js","webpack:///./~/querystring-es3/index.js","webpack:///./~/url/util.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/HttpConnection.js","webpack:///./src/WebSocket.js","webpack:///./src/WebSocketConnection.js","webpack:///./src/ajax.js","webpack:///./src/XMLHttpRequest.js","webpack:///./src/util.js","webpack:///./src/wxadapter/WebSocket.js","webpack:///./src/wxadapter/XmlHttpRequst.js","webpack:///ws (ignored)","webpack:///xhr2 (ignored)","webpack:///./src/index.js"],"names":["Object","assign","target","TypeError","to","index","nextSource","nextKey","prototype","hasOwnProperty","call","BaseConnection","address","options","handler","secure","Error","constructor","getInstance","_address","_secure","_handler","_protocol","_listenerMap","getProtocol","replace","message","request","type","listener","listeners","indexOf","push","splice","args","forEach","apply","EVENT_OPEN","EVENT_CLOSE","EVENT_ERROR","EVENT_REQUEST","EVENT_SEND","EVENT_RESPONSE","EVENT_MESSAGE","EVENT_PROGRESS","url","exec","protocol","urlWithoutProtocol","func","HttpConnection","_request","ajaxOptions","xhr","success","data","trigger","error","jqXHR","textStatus","errorThrown","complete","getAddress","onreadystatechange","readyState","origFun","onprogress","event","abort","http","https","module","exports","ws","wx","require","window","WebSocket","console","warn","WebSocketConnection","_ws","deferred","_connect","CLOSED","OPEN","undefined","CONNECTING","CLOSING","binaryType","dataType","addEventListener","err","msg","getStatus","send","close","wss","getArrayBufferResponse","ArrayBuffer","response","text","responseText","length","buf","bufView","Uint8Array","i","charCodeAt","getBlobResponse","Blob","jsonpID","nodejs","document","key","name","rscript","scriptTypeRE","xmlTypeRE","jsonType","htmlType","blankRE","ajax","settings","ajaxStart","crossDomain","test","location","RegExp","$2","host","hasPlaceholder","appendQuery","JSONP","toString","serializeData","mime","accepts","baseHeaders","$1","abortTimeout","XDomainRequest","onload","status","split","overrideMimeType","contentType","toUpperCase","headers","clearTimeout","result","mimeToDataType","getResponseHeader","eval","responseXML","JSON","parse","e","ajaxError","ajaxSuccess","async","open","supported","responseType","setRequestHeader","ajaxBeforeSend","timeout","setTimeout","empty","triggerAndReturn","context","eventName","triggerGlobal","global","active","ajaxStop","beforeSend","ajaxComplete","callbackName","script","createElement","head","getElementsByTagName","documentElement","onerror","src","insertBefore","firstChild","XMLHttpRequest","json","xml","html","query","get","post","getJSON","xhr2","serialize","param","params","obj","traditional","scope","array","Array","keys","value","add","k","v","encodeURIComponent","join","EventTarget","URL","parsed","SyntaxError","instance","onopen","onclose","onmessage","connectSocket","onSocketOpen","dispatchEvent","onSocketError","onSocketMessage","onSocketClose","code","reason","closeSocket","sendSocketMessage","removeEventListener","XMLHttpRequestResponseTypes","XmlHttpRequest","onloadstart","onabort","ontimeout","onloadend","_readystate","UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"],"mappings":"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+B,SAAS,oFAAoF,OAAO,gBAAgB,YAAY,mBAAmB,OAAO,wBAAwB,IAAI,iBAAiB,IAAI,MAAM,SAAS,aAAa,cAAc,cAAc,gBAAgB,qJAAqJ,cAAc,yBAAyB,kBAAkB,gCAAgC,yBAAyB,iCAAiC,EAAE,cAAc,0BAA0B,gBAAgB,+BAA+B,4DAA4D,kBAAkB,qBAAqB,MAAM,oBAAoB,qBAAqB,cAAc,0BAA0B,sBAAsB,eAAe,YAAY,oBAAoB,iBAAiB,sBAAsB,2BAA2B,GAAG,sBAAsB,yDAAyD,oCAAoC,GAAG,SAAS,G;;;;;;;;ACDhwC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAK;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,2CAA2C,KAAK;AAChD,0CAA0C,KAAK;AAC/C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,mBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA,0CAA0C,OAAO;AACjD;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C,OAAO;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,mBAAmB;AACrC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,mBAAmB;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B,QAAQ;AACtC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,MAAM;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;sDC3tBA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,MAAM;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,SAAS;AACrB;AACA,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,SAAS;AACrB;AACA,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,KAAK;AACL,4BAA4B;AAC5B;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,mCAAmC;AAClE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,aAAa,WAAW;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB;;AAExB,yCAAyC,qBAAqB;;AAE9D;AACA;AACA;AACA;AACA;AACA,kCAAkC,oBAAoB;;AAEtD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,0BAA0B,iBAAiB;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,cAAc,iBAAiB;AAC/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B,oBAAoB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAEA;AACA;AACA;AACA;AACA,GAAG;AAAA;AACH,EAAE;AACF;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA,CAAC;;;;;;;;;ACphBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,eAAe;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACpFA;;AAEA;AACA;;;;;;;;ACHA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;ACrBA;;;;AACA;;;;;;;;;;;;IAEMuC,c;;;AAEJ,4BAAqB;AAAA;;AAAA;;AAAA,sCAANhB,IAAM;AAANA,UAAM;AAAA;;AAGnB;AAHmB,2JACVA,IADU;;AAInB,UAAKiB,QAAL,GAAgB,EAAhB;AAJmB;AAKpB;;;;4BAEOzB,O,EAASb,O,EAAS;AAAA;;AACxB,UAAMuC,cAAcpD,OAAOC,MAAP,CAAc,EAAd,EAAkB,KAAKY,OAAvB,EAAgCA,OAAhC,CAApB;AACA,UAAIwC,YAAJ;;AAEAD,kBAAYE,OAAZ,GAAsB,UAACC,IAAD,EAAU;AAC9B,eAAKC,OAAL,CAAa7C,yBAAegC,aAA5B,EAA2CY,IAA3C;AACA,eAAKC,OAAL,CAAa7C,yBAAe+B,cAA5B,EAA4Ca,IAA5C;AACD,OAHD;;AAKAH,kBAAYK,KAAZ,GAAoB,UAACC,KAAD,EAA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","file":"dzhyun-connection.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"DzhyunConnection\"] = factory();\n\telse\n\t\troot[\"DzhyunConnection\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d06823076a60495f4278","// Object.assign polyfill\r\nif (typeof Object.assign !== 'function') {\r\n  Object.assign = function assign(target, ...args) { // .length of function is 2\r\n    if (target == null) { // TypeError if undefined or null\r\n      throw new TypeError('Cannot convert undefined or null to object');\r\n    }\r\n\r\n    const to = Object(target);\r\n\r\n    for (let index = 0; index < args.length; index += 1) {\r\n      const nextSource = args[index];\r\n\r\n      if (nextSource != null) { // Skip over if undefined or null\r\n        for (const nextKey in nextSource) { // eslint-disable-line no-restricted-syntax\r\n          // Avoid bugs when hasOwnProperty is shadowed\r\n          if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n            to[nextKey] = nextSource[nextKey];\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return to;\r\n  };\r\n}\r\n\r\n/**\r\n * connection基类\r\n */\r\nclass BaseConnection {\r\n\r\n  /**\r\n   * 构造方法\r\n   * @param {!string} address 连接地址\r\n   * @param {!object} options 设置参数\r\n   * @param {object=} handler 事件处理对象\r\n   * @param {boolean=} [secure=false]\r\n   */\r\n  constructor(address, options, handler, secure) {\r\n    if (typeof address !== 'string') {\r\n      throw new Error('address is incorrect');\r\n    }\r\n    if (this.constructor === BaseConnection) {\r\n      // eslint-disable-next-line no-use-before-define\r\n      return getInstance(address, options, handler);\r\n    }\r\n    this._address = address;\r\n    this.options = options || {};\r\n\r\n    if (typeof handler === 'boolean') {\r\n      this._secure = handler;\r\n      this._handler = null;\r\n    } else {\r\n      this._secure = secure || false;\r\n      this._handler = handler;\r\n    }\r\n\r\n    // 默认协议\r\n    this._protocol = 'http';\r\n\r\n    this._listenerMap = {};\r\n  }\r\n\r\n  getAddress() {\r\n    return `${this.getProtocol()}://${this._address.replace(/^(\\w+:\\/\\/)?/, '')}`;\r\n  }\r\n\r\n  getProtocol() {\r\n    return this._protocol + (this._secure ? 's' : '');\r\n  }\r\n\r\n  // eslint-disable-next-line no-unused-vars,class-methods-use-this\r\n  request(message, options) {\r\n  }\r\n\r\n  send(message, options) {\r\n    return this.request(message, options);\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  close() {\r\n  }\r\n\r\n  /**\r\n   * 事件监听接口\r\n   */\r\n  on(type, listener) {\r\n    if (typeof listener === 'function') {\r\n      const listeners = this._listenerMap[type] || (this._listenerMap[type] = []);\r\n      if (listeners.indexOf(listener) < 0) {\r\n        listeners.push(listener);\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  off(type, listener) {\r\n    if (typeof listener === 'function') {\r\n      const listeners = this._listenerMap[type] || (this._listenerMap[type] = []);\r\n      const index = listeners.indexOf(listener);\r\n      if (index >= 0) listeners.splice(index, 1);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  trigger(type, ...args) {\r\n    const listeners = this._listenerMap[type];\r\n    if (listeners) listeners.forEach(listener => listener.apply(this, args));\r\n\r\n    // 同时触发handler中对应方法\r\n    if (this._handler && typeof this._handler[type] === 'function') this._handler[type](...args);\r\n    return this;\r\n  }\r\n}\r\n\r\nBaseConnection.EVENT_OPEN = 'open';\r\nBaseConnection.EVENT_CLOSE = 'close';\r\nBaseConnection.EVENT_ERROR = 'error';\r\nBaseConnection.EVENT_REQUEST = 'request';\r\nBaseConnection.EVENT_SEND = 'send';\r\nBaseConnection.EVENT_RESPONSE = 'response';\r\nBaseConnection.EVENT_MESSAGE = 'message';\r\nBaseConnection.EVENT_PROGRESS = 'progress';\r\n\r\nfunction getInstance(url, options, handler) {\r\n  const [, , protocol = 'http', urlWithoutProtocol] = /^((\\w+):\\/\\/)?(.*)/.exec(url);\r\n\r\n  const func = BaseConnection[protocol];\r\n  if (!func) {\r\n    throw new Error(`protocol \"${protocol}\" no support`);\r\n  }\r\n  return func(urlWithoutProtocol, options, handler);\r\n}\r\n\r\nexport default BaseConnection;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/BaseConnection.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 1\n// module chunks = 0 1 2 3 4 5","/*! (c) 2017 Andrea Giammarchi (ISC) */\nvar EventTarget=function(){\"use strict\";var t=\"object\"==typeof global?global:self,e=[].findIndex||function(t,e){for(var n=this.length;n--;)if(t.call(e,this[n]))return n;return n},n=Object.defineProperty,r=\"__event-target__\"+Math.random(),i=t.WeakMap||function(){return{get:function(t){return t[r]},set:function(t,e){n(t,r,{configurable:!0,value:e})}}},a=t.EventTarget;try{new a}catch(o){a=function(){function t(){}function r(t){var e=t.options;e&&e.once&&u.call(t.target,this.type,t.listener,t.options),\"function\"==typeof t.listener?t.listener.call(t.target,this):t.listener.handleEvent(this)}function a(t){return this===t.listener}function o(t,n,r){var i=f(this),o=i[t]||(i[t]=[]);e.call(o,a,n)<0&&o.push({target:this,listener:n,options:r})}function c(t){var e=f(this),n=e[t.type];return n&&(h(t,{currentTarget:this,target:this}),n.forEach(r,t),delete t.currentTarget,delete t.target),!0}function u(t,n,r){var i=f(this),o=i[t];if(o){var c=e.call(o,a,n);-1<c&&o.splice(c,1)}}function l(){}var s=new i,f=function(t){return s.get(t)||v(t)},v=function(t){var e=new l;return s.set(t,e),e},h=function(t,e){for(var r in e)n(t,r,{configurable:!0,value:e[r]})};return h(t.prototype,{addEventListener:o,dispatchEvent:c,removeEventListener:u}),l.prototype=Object.create(null),t}()}return a}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/event-target/min.js\n// module id = 2\n// module chunks = 0 1 2 3 4 5","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/url/url.js\n// module id = 3\n// module chunks = 0 1 2 3 4 5","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/punycode/punycode.js\n// module id = 4\n// module chunks = 0 1 2 3 4 5","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/querystring-es3/decode.js\n// module id = 5\n// module chunks = 0 1 2 3 4 5","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/querystring-es3/encode.js\n// module id = 6\n// module chunks = 0 1 2 3 4 5","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/querystring-es3/index.js\n// module id = 7\n// module chunks = 0 1 2 3 4 5","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/url/util.js\n// module id = 8\n// module chunks = 0 1 2 3 4 5","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 9\n// module chunks = 0 1 2 3 4 5","import BaseConnection from './BaseConnection';\r\nimport ajax from './ajax';\r\n\r\nclass HttpConnection extends BaseConnection {\r\n\r\n  constructor(...args) {\r\n    super(...args);\r\n\r\n    // 用于记录当前未关闭的请求\r\n    this._request = [];\r\n  }\r\n\r\n  request(message, options) {\r\n    const ajaxOptions = Object.assign({}, this.options, options);\r\n    let xhr;\r\n\r\n    ajaxOptions.success = (data) => {\r\n      this.trigger(BaseConnection.EVENT_MESSAGE, data);\r\n      this.trigger(BaseConnection.EVENT_RESPONSE, data);\r\n    };\r\n\r\n    ajaxOptions.error = (jqXHR, textStatus, errorThrown) => {\r\n      this.trigger(BaseConnection.EVENT_ERROR, errorThrown);\r\n    };\r\n\r\n    ajaxOptions.complete = () => {\r\n      const index = this._request.indexOf(xhr);\r\n      this._request.splice(index, 1);\r\n    };\r\n\r\n    ajaxOptions.url = this.getAddress() + (message || '');\r\n\r\n    xhr = ajax(ajaxOptions);\r\n\r\n    if (xhr) {\r\n      xhr.onreadystatechange = (origFun => () => {\r\n        if (xhr.readyState === 2) {\r\n\r\n          // 发出了请求\r\n          this.trigger(BaseConnection.EVENT_SEND, message);\r\n          this.trigger(BaseConnection.EVENT_REQUEST, message);\r\n        }\r\n        if (origFun) origFun();\r\n      })(xhr.onreadystatechange);\r\n    }\r\n\r\n    // 打开了连接\r\n    this.trigger(BaseConnection.EVENT_OPEN);\r\n\r\n    this._request.push(xhr);\r\n\r\n    xhr.onprogress = (event) => {\r\n      this.trigger(BaseConnection.EVENT_PROGRESS, event);\r\n    };\r\n\r\n    return this;\r\n  }\r\n\r\n  close() {\r\n\r\n    // 取消全部未结束的请求\r\n    this._request.forEach((xhr, index) => {\r\n      xhr.abort();\r\n      this._request.splice(index, 1);\r\n    });\r\n\r\n    this.trigger(BaseConnection.EVENT_CLOSE);\r\n    return this;\r\n  }\r\n}\r\n\r\nBaseConnection.http = function http(url, options, handler) {\r\n  return new HttpConnection(url, options, handler, false);\r\n};\r\n\r\nBaseConnection.https = function https(url, options, handler) {\r\n  return new HttpConnection(url, options, handler, true);\r\n};\r\n\r\nmodule.exports = BaseConnection;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/HttpConnection.js","// 小程序环境中存在全局对象wx\nlet ws = {}\nif (typeof wx !== 'undefined'){\n  ws = require('./wxadapter/WebSocket.js')\n}else{\n  ws = require('ws');\n}\n\n\n// WebSocket依赖，node环境使用模块ws\nif (typeof window !== 'undefined') {\n  if (window.WebSocket) {\n    module.exports = window.WebSocket;\n  } else {\n    console.warn('当前浏览器不支持WebSocket');\n  }\n} else if (typeof WebSocket !== 'undefined') {\n  // eslint-disable-next-line no-undef\n  module.exports = WebSocket;\n} else {\n  module.exports = ws;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/WebSocket.js","import BaseConnection from './BaseConnection';\r\nimport WebSocket from './WebSocket';\r\n\r\nclass WebSocketConnection extends BaseConnection {\r\n\r\n  /**\r\n   * @param address\r\n   * @param {{deferred: boolean}} options\r\n   *  deferred: false 创建连接时马上连接websocket，默认\r\n   *            true  延时在第一次请求时连接websocket\r\n   * @param handler\r\n   * @param secure\r\n   */\r\n  constructor(address, options, handler, secure) {\r\n    super(address, options, handler, secure);\r\n\r\n    this._protocol = 'ws';\r\n    this._ws = null;\r\n\r\n    const deferred = (options && options.deferred === true) || false;\r\n\r\n    if (deferred === false) {\r\n      this._connect();\r\n    }\r\n  }\r\n\r\n  getStatus() {\r\n    return this._ws ? this._ws.readyState : WebSocket.CLOSED;\r\n  }\r\n\r\n  _connect() {\r\n\r\n    // 连接创建websocket\r\n    if (typeof WebSocket !== 'undefined') {\r\n      this._ws = new WebSocket(this.getAddress());\r\n\r\n      // 避免WebSocket上没有状态静态值\r\n      if (WebSocket.OPEN === undefined) {\r\n        WebSocket.CONNECTING = this._ws.CONNECTING;\r\n        WebSocket.OPEN = this._ws.OPEN;\r\n        WebSocket.CLOSING = this._ws.CLOSING;\r\n        WebSocket.CLOSED = this._ws.CLOSED;\r\n      }\r\n      this._ws.binaryType = this.options.binaryType || this.options.dataType || 'arraybuffer';\r\n\r\n      this._ws.addEventListener('open', () => {\r\n        this.trigger(BaseConnection.EVENT_OPEN);\r\n      });\r\n      this._ws.addEventListener('error', (err) => {\r\n        this.trigger(BaseConnection.EVENT_ERROR, err);\r\n      });\r\n      this._ws.addEventListener('close', () => {\r\n        this.trigger(BaseConnection.EVENT_CLOSE);\r\n      });\r\n      this._ws.addEventListener('message', (message) => {\r\n        this.trigger(BaseConnection.EVENT_MESSAGE, message.data);\r\n        this.trigger(BaseConnection.EVENT_RESPONSE, message.data);\r\n      });\r\n    } else {\r\n      throw Error('Don\\'t support WebSocket');\r\n    }\r\n  }\r\n\r\n  request(message) {\r\n    const msg = message || '';\r\n    if (this.getStatus() === WebSocket.CLOSED) {\r\n      this._connect();\r\n    }\r\n\r\n    if (this.getStatus() !== WebSocket.OPEN) {\r\n      this._ws.addEventListener('open', () => {\r\n        this._ws.send(msg);\r\n        this.trigger(BaseConnection.EVENT_SEND, msg);\r\n        this.trigger(BaseConnection.EVENT_REQUEST, msg);\r\n      });\r\n    } else {\r\n      this._ws.send(msg);\r\n      this.trigger(BaseConnection.EVENT_SEND, msg);\r\n      this.trigger(BaseConnection.EVENT_REQUEST, msg);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  close() {\r\n    if (this.getStatus() !== WebSocket.CLOSED) {\r\n      this._ws.close();\r\n      this._ws = null;\r\n    }\r\n    return this;\r\n  }\r\n}\r\n\r\nBaseConnection.ws = function ws(url, options, handler) {\r\n  return new WebSocketConnection(url, options, handler, false);\r\n};\r\n\r\nBaseConnection.wss = function wss(url, options, handler) {\r\n  return new WebSocketConnection(url, options, handler, true);\r\n};\r\n\r\nmodule.exports = BaseConnection;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/WebSocketConnection.js","/* eslint-disable */\r\nimport XMLHttpRequest from './XMLHttpRequest';\r\nimport { param } from './util';\r\n\r\n/**\r\n * 模拟jquery的ajax接口\r\n */\r\n\r\n/**\r\n * 得到ArrayBuffer类型的响应数据\r\n * @param xhr\r\n * @returns {ArrayBuffer}\r\n */\r\nfunction getArrayBufferResponse(xhr) {\r\n  if (typeof ArrayBuffer === 'undefined') {\r\n    throw new Error('不支持ArrayBuffer类型');\r\n  } else if (xhr.response instanceof ArrayBuffer) {\r\n    return xhr.response;\r\n  } else {\r\n\r\n    const text = xhr.responseText;\r\n    const length = text.length;\r\n    const buf = new ArrayBuffer(length);\r\n    const bufView = new Uint8Array(buf);\r\n    for (let i = 0; i < length; i += 1) {\r\n\r\n      // \"& 0xff\"，表示在每个字符的两个字节之中，只保留后一个字节，将前一个字节扔掉。原因是浏览器解读字符的时候，会把字符自动解读成Unicode的0xF700-0xF7ff区段。\r\n      // http://www.ruanyifeng.com/blog/2012/09/xmlhttprequest_level_2.html\r\n      // eslint-disable-next-line no-bitwise\r\n      bufView[i] = text.charCodeAt(i) & 0xff;\r\n    }\r\n    return buf;\r\n  }\r\n}\r\n\r\n/**\r\n * 得到Blob类型的响应数据\r\n * @param xhr\r\n */\r\nfunction getBlobResponse(xhr) {\r\n  if (typeof Blob === 'undefined') {\r\n    throw new Error('不支持Blob类型');\r\n  } else if (xhr.response instanceof Blob) {\r\n    return xhr.response;\r\n  } else {\r\n    const buf = getArrayBufferResponse(xhr);\r\n\r\n    // TODO 未知类型\r\n    return new Blob([buf]);\r\n  }\r\n}\r\n\r\n// 修改自https://github.com/ForbesLindesay/ajax\r\nvar jsonpID = 0,\r\n  nodejs = typeof window === 'undefined',\r\n  document = !nodejs && window.document,\r\n  key,\r\n  name,\r\n  rscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,\r\n  scriptTypeRE = /^(?:text|application)\\/javascript/i,\r\n  xmlTypeRE = /^(?:text|application)\\/xml/i,\r\n  jsonType = 'application/json',\r\n  htmlType = 'text/html',\r\n  blankRE = /^\\s*$/\r\n\r\nvar ajax = module.exports = function(options){\r\n  var settings = Object.assign({}, options || {})\r\n  for (key in ajax.settings) if (settings[key] === undefined) settings[key] = ajax.settings[key]\r\n\r\n  ajaxStart(settings)\r\n\r\n  if (!settings.crossDomain) {\r\n    settings.crossDomain = /^([\\w-]+:)?\\/\\/([^\\/]+)/.test(settings.url) &&\r\n      !nodejs && !!window.location && RegExp.$2 != window.location.host\r\n  }\r\n\r\n  var dataType = settings.dataType, hasPlaceholder = /=\\?/.test(settings.url)\r\n  if (dataType == 'jsonp' || hasPlaceholder) {\r\n    if (!hasPlaceholder) settings.url = appendQuery(settings.url, 'callback=?')\r\n    return ajax.JSONP(settings)\r\n  }\r\n\r\n  if (!settings.url) settings.url = !nodejs && !!window.location && window.location.toString()\r\n  serializeData(settings)\r\n\r\n  var mime = settings.accepts[dataType],\r\n    baseHeaders = { },\r\n    protocol = /^([\\w-]+:)\\/\\//.test(settings.url) ? RegExp.$1 : !nodejs && !!window.location && window.location.protocol,\r\n    xhr = ajax.settings.xhr(), abortTimeout\r\n\r\n  if (!settings.crossDomain) baseHeaders['X-Requested-With'] = 'XMLHttpRequest'\r\n  else if (typeof XDomainRequest !== 'undefined') {\r\n    xhr = new XDomainRequest;\r\n    xhr.onload = function() {\r\n      xhr.readyState = 4;\r\n      xhr.status = 200;\r\n      xhr.onreadystatechange();\r\n    }\r\n    xhr.error = function() {\r\n      xhr.readyState = 4;\r\n      xhr.status = 400;\r\n      xhr.onreadystatechange();\r\n    }\r\n  }\r\n  if (mime) {\r\n    baseHeaders['Accept'] = mime\r\n    if (mime.indexOf(',') > -1) mime = mime.split(',', 2)[0]\r\n    xhr.overrideMimeType && xhr.overrideMimeType(mime)\r\n  }\r\n  if (settings.contentType || (settings.data && settings.type.toUpperCase() != 'GET'))\r\n    baseHeaders['Content-Type'] = (settings.contentType || 'application/x-www-form-urlencoded')\r\n  settings.headers = Object.assign(baseHeaders, settings.headers || {})\r\n\r\n  xhr.onreadystatechange = function(){\r\n    if (xhr.readyState == 4) {\r\n      clearTimeout(abortTimeout)\r\n      var result, error = false\r\n      if ((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304 || (xhr.status == 0 && protocol == 'file:')) {\r\n        dataType = dataType || mimeToDataType(xhr.contentType || (xhr.getResponseHeader && xhr.getResponseHeader('content-type')));\r\n\r\n        try {\r\n          if (dataType == 'script')    (1,eval)(result)\r\n          else if (dataType == 'xml')  result = xhr.responseXML\r\n          else if (dataType == 'json') result = blankRE.test(xhr.responseText) ? null : JSON.parse(xhr.responseText)\r\n          else if (dataType === 'arraybuffer') result = getArrayBufferResponse(xhr)\r\n          else if (dataType === 'blob') result = getBlobResponse(xhr)\r\n          else result = xhr.responseText\r\n        } catch (e) { error = e }\r\n\r\n        if (error) ajaxError(error, 'parsererror', xhr, settings)\r\n        else ajaxSuccess(result, xhr, settings)\r\n      } else {\r\n        ajaxError(null, 'error', xhr, settings)\r\n      }\r\n    }\r\n  }\r\n\r\n  var async = 'async' in settings ? settings.async : true\r\n  xhr.open(settings.type, settings.url, async)\r\n\r\n  if (dataType == 'arraybuffer' || dataType == 'blob') {\r\n\r\n    // 因为IE的问题，只能将设置responseType的操作放在xhr.open之后\r\n    // https://connect.microsoft.com/IE/feedback/details/795580/ie11-xmlhttprequest-incorrectly-throws-invalidstateerror-when-setting-responsetype\r\n    // 判断是否支持设置responseType\r\n    var supported = typeof xhr.responseType === 'string';\r\n\r\n    // 支持二进制请求直接设置responseType\r\n    if (supported) {\r\n\r\n      // 响应类型默认arraybuffer，可以设置为blob（响应回来使用response取得数据）\r\n      xhr.responseType = options.dataType;\r\n    } else {\r\n\r\n      // 不支持则尝试使用用户自定义的字符集方式（响应回来使用responseText取得数据）\r\n      xhr.overrideMimeType ? xhr.overrideMimeType(\"text/plain; charset=x-user-defined\") :\r\n        xhr.setRequestHeader('Accept-Charset', 'x-user-defined');\r\n    }\r\n  }\r\n\r\n  for (name in settings.headers) xhr.setRequestHeader(name, settings.headers[name])\r\n\r\n  if (ajaxBeforeSend(xhr, settings) === false) {\r\n    xhr.abort()\r\n    return false\r\n  }\r\n\r\n  if (settings.timeout > 0) abortTimeout = setTimeout(function(){\r\n    xhr.onreadystatechange = empty\r\n    xhr.abort()\r\n    ajaxError(null, 'timeout', xhr, settings)\r\n  }, settings.timeout)\r\n\r\n  // avoid sending empty string (#319)\r\n  xhr.send(settings.data ? settings.data : null)\r\n  return xhr\r\n}\r\n\r\n\r\n// trigger a custom event and return false if it was cancelled\r\nfunction triggerAndReturn(context, eventName, data) {\r\n  //todo: Fire off some events\r\n  //var event = $.Event(eventName)\r\n  //$(context).trigger(event, data)\r\n  return true;//!event.defaultPrevented\r\n}\r\n\r\n// trigger an Ajax \"global\" event\r\nfunction triggerGlobal(settings, context, eventName, data) {\r\n  if (settings.global) return triggerAndReturn(context || document, eventName, data)\r\n}\r\n\r\n// Number of active Ajax requests\r\najax.active = 0\r\n\r\nfunction ajaxStart(settings) {\r\n  if (settings.global && ajax.active++ === 0) triggerGlobal(settings, null, 'ajaxStart')\r\n}\r\nfunction ajaxStop(settings) {\r\n  if (settings.global && !(--ajax.active)) triggerGlobal(settings, null, 'ajaxStop')\r\n}\r\n\r\n// triggers an extra global event \"ajaxBeforeSend\" that's like \"ajaxSend\" but cancelable\r\nfunction ajaxBeforeSend(xhr, settings) {\r\n  var context = settings.context\r\n  if (settings.beforeSend.call(context, xhr, settings) === false ||\r\n    triggerGlobal(settings, context, 'ajaxBeforeSend', [xhr, settings]) === false)\r\n    return false\r\n\r\n  triggerGlobal(settings, context, 'ajaxSend', [xhr, settings])\r\n}\r\nfunction ajaxSuccess(data, xhr, settings) {\r\n  var context = settings.context, status = 'success'\r\n  settings.success.call(context, data, status, xhr)\r\n  triggerGlobal(settings, context, 'ajaxSuccess', [xhr, settings, data])\r\n  ajaxComplete(status, xhr, settings)\r\n}\r\n// type: \"timeout\", \"error\", \"abort\", \"parsererror\"\r\nfunction ajaxError(error, type, xhr, settings) {\r\n  var context = settings.context\r\n  settings.error.call(context, xhr, type, error)\r\n  triggerGlobal(settings, context, 'ajaxError', [xhr, settings, error])\r\n  ajaxComplete(type, xhr, settings)\r\n}\r\n// status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\r\nfunction ajaxComplete(status, xhr, settings) {\r\n  var context = settings.context\r\n  settings.complete.call(context, xhr, status)\r\n  triggerGlobal(settings, context, 'ajaxComplete', [xhr, settings])\r\n  ajaxStop(settings)\r\n}\r\n\r\n// Empty function, used as default callback\r\nfunction empty() {}\r\n\r\najax.JSONP = function(options){\r\n  if (!('type' in options)) return ajax(options)\r\n\r\n  var callbackName = 'jsonp' + (++jsonpID),\r\n    script = document.createElement('script'),\r\n    abort = function(){\r\n      //todo: remove script\r\n      //$(script).remove()\r\n      if (!nodejs && callbackName in window) window[callbackName] = empty\r\n      ajaxComplete('abort', xhr, options)\r\n    },\r\n    xhr = { abort: abort }, abortTimeout,\r\n    head = document.getElementsByTagName(\"head\")[0]\r\n      || document.documentElement\r\n\r\n  if (options.error) script.onerror = function() {\r\n    xhr.abort()\r\n    options.error()\r\n  }\r\n\r\n  if (!nodejs) window[callbackName] = function(data){\r\n    clearTimeout(abortTimeout)\r\n    //todo: remove script\r\n    //$(script).remove()\r\n    delete window[callbackName]\r\n    ajaxSuccess(data, xhr, options)\r\n  }\r\n\r\n  serializeData(options)\r\n  script.src = options.url.replace(/=\\?/, '=' + callbackName)\r\n\r\n  // Use insertBefore instead of appendChild to circumvent an IE6 bug.\r\n  // This arises when a base node is used (see jQuery bugs #2709 and #4378).\r\n  head.insertBefore(script, head.firstChild);\r\n\r\n  if (options.timeout > 0) abortTimeout = setTimeout(function(){\r\n    xhr.abort()\r\n    ajaxComplete('timeout', xhr, options)\r\n  }, options.timeout)\r\n\r\n  return xhr\r\n}\r\n\r\najax.settings = {\r\n  // Default type of request\r\n  type: 'GET',\r\n  // Callback that is executed before request\r\n  beforeSend: empty,\r\n  // Callback that is executed if the request succeeds\r\n  success: empty,\r\n  // Callback that is executed the the server drops error\r\n  error: empty,\r\n  // Callback that is executed on request complete (both: error and success)\r\n  complete: empty,\r\n  // The context for the callbacks\r\n  context: null,\r\n  // Whether to trigger \"global\" Ajax events\r\n  global: true,\r\n  // Transport\r\n  xhr: function () {\r\n    return new XMLHttpRequest()\r\n  },\r\n  // MIME types mapping\r\n  accepts: {\r\n    script: 'text/javascript, application/javascript',\r\n    json:   jsonType,\r\n    xml:    'application/xml, text/xml',\r\n    html:   htmlType,\r\n    text:   'text/plain'\r\n  },\r\n  // Whether the request is to another domain\r\n  crossDomain: false,\r\n  // Default timeout\r\n  timeout: 0\r\n}\r\n\r\nfunction mimeToDataType(mime) {\r\n  return mime && ( mime == htmlType ? 'html' :\r\n      mime == jsonType ? 'json' :\r\n        scriptTypeRE.test(mime) ? 'script' :\r\n        xmlTypeRE.test(mime) && 'xml' ) || 'text'\r\n}\r\n\r\nfunction appendQuery(url, query) {\r\n  return (url + '&' + query).replace(/[&?]{1,2}/, '?')\r\n}\r\n\r\n// serialize payload and append it to the URL for GET requests\r\nfunction serializeData(options) {\r\n  if (typeof options.data === 'object') options.data = param(options.data)\r\n  if (options.data && (!options.type || options.type.toUpperCase() == 'GET'))\r\n    options.url = appendQuery(options.url, options.data)\r\n}\r\n\r\najax.get = function(url, success){ return ajax({ url: url, success: success }) }\r\n\r\najax.post = function(url, data, success, dataType){\r\n  if (typeof data === 'function') dataType = dataType || success, success = data, data = null\r\n  return ajax({ type: 'POST', url: url, data: data, success: success, dataType: dataType })\r\n}\r\n\r\najax.getJSON = function(url, success){\r\n  return ajax({ url: url, success: success, dataType: 'json' })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ajax.js","\n// 小程序环境中存在全局对象wx\nlet xhr2 = {};\nif (typeof wx !== 'undefined'){\n  xhr2 = require('./wxadapter/XmlHttpRequst.js')\n}else{\n  xhr2 = require('xhr2');\n}\n\n// 判断环境，浏览器环境存在window对象\nif (typeof window !== 'undefined') {\n\n  // 不考虑IE6以下的ActiveX方式\n  if (window.XMLHttpRequest) {\n    module.exports = window.XMLHttpRequest;\n  } else {\n    console.warn('当前浏览器不支持XMLHttpRequest');\n  }\n} else if (typeof XMLHttpRequest !== 'undefined') {\n  // eslint-disable-next-line no-undef\n  module.exports = XMLHttpRequest;\n} else {\n\n  // nodejs中使用xhr2模块\n  module.exports = xhr2.XMLHttpRequest || xhr2;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/XMLHttpRequest.js","export function serialize(params, obj, traditional, scope) {\r\n  const array = (obj instanceof Array);\r\n  Object.keys(obj).forEach((key) => {\r\n    const value = obj[key];\r\n\r\n    // eslint-disable-next-line no-param-reassign\r\n    if (scope) key = traditional ? scope : `scope[${(array ? '' : key)}]`; // scope + '[' + (array ? '' : key) + ']'\r\n    // handle data in serializeArray() format\r\n    if (!scope && array) params.add(value.name, value.value);\r\n    // recurse into nested objects\r\n    else if (traditional ? (value instanceof Array) : (typeof value === 'object')) serialize(params, value, traditional, key);\r\n    else params.add(key, value);\r\n  });\r\n}\r\n\r\nexport function param(obj, traditional) {\r\n  const params = [];\r\n  params.add = function add(k, v) { this.push(`${encodeURIComponent(k)}=${encodeURIComponent(v)}`); };\r\n  serialize(params, obj, traditional);\r\n  return params.join('&').replace('%20', '+');\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","/**\n *  https://www.w3.org/TR/2011/WD-websockets-20110419/\n */\n// https://github.com/stackOverMind/WeApp-adapter/blob/master/src/WebSocket.js\nconst EventTarget = require('event-target');\nconst URL = require('url');\nclass WebSocket {\n  constructor(url) {\n    if (url == null) {\n      throw new TypeError('1 argument needed')\n    }\n    try {\n      var parsed = URL.parse(url);\n      if (parsed.protocol != 'wss:') {\n        throw new Error('protocol must be wss')\n      }\n    }\n    catch (e) {\n      throw new SyntaxError('url in wrong format,protocol must be wss')\n    }\n    //根据微信小程序API介绍 websocket是单例的\n    if (WebSocket.instance != null) {\n      WebSocket.instance.close()//安全的关闭\n    }\n    WebSocket.instance = this\n    this.url = url\n    this.readyState = 0\n    this.onopen = null;\n    this.onclose = null;\n    this.onerror = null;\n    this.onmessage = null;\n    wx.connectSocket({\n      url: url,//API介绍比较模糊\n    })\n    wx.onSocketOpen(() => {\n      this.readyState = WebSocket.OPEN\n      if (this.onopen) {\n        this.onopen.call(this)\n      }\n      this.dispatchEvent({ 'type': 'open' })\n    })\n    wx.onSocketError((e) => {\n      var event = { 'type': 'error', 'data': e }\n      if (this.onerror) {\n        this.onerror.call(this, event)\n      }\n      this.dispatchEvent(event)\n    })\n    wx.onSocketMessage((data) => {\n\n      if (this.readyState !== WebSocket.OPEN && this.readyState !== WebSocket.CLOSING) {\n        return\n      }\n      /* webmessage https://www.w3.org/TR/2010/WD-webmessaging-20101118/  */\n      var event = { 'type': 'message', 'data': data.data }//TODO origin ...\n      if (this.onmessage) {\n        this.onmessage.call(this, event)\n      }\n      this.dispatchEvent(event)\n    })\n    wx.onSocketClose(() => {\n      this.readyState = WebSocket.CLOSED\n      if (this.onclose) {\n        var event = { 'type': 'close', 'wasClean': true, code: 0, reason: '' }\n        this.onclose.call(this, event)\n      }\n    })\n  }\n  close() {\n    wx.closeSocket()\n  }\n  send(data) {\n    wx.sendSocketMessage({ data: data })\n  }\n}\nWebSocket.prototype.addEventListener = EventTarget.prototype.addEventListener;\nWebSocket.prototype.removeEventListener = EventTarget.prototype.removeEventListener;\nWebSocket.prototype.dispatchEvent = EventTarget.prototype.dispatchEvent;\n\nWebSocket.CONNECTING = 0;\nWebSocket.OPEN = 1;\nWebSocket.CLOSING = 2;\nWebSocket.CLOSED = 3;\nWebSocket.instance = null;\nmodule.exports = WebSocket\n\n\n\n// WEBPACK FOOTER //\n// ./src/wxadapter/WebSocket.js","//https://github.com/stackOverMind/WeApp-adapter/blob/master/src/XmlHttpRequst.js\nconst EventTarget = require('event-target');\nconst URL = require('url');\n \nconst XMLHttpRequestResponseTypes = [\n    \"\",\n    \"arraybuffer\",\n    \"blob\",\n    \"document\",\n    \"json\",\n    \"text\"\n]\nclass XmlHttpRequest {\n    constructor() {\n        this.onloadstart = null\n        this.onprogress = null\n        this.onabort = null\n        this.onerror = null\n        this.onload = null\n        this.ontimeout = null\n        this.onloadend = null        \n        this.onreadystatechange = null\n        this._readystate = 0\n    }\n    get readystate() {\n        return this._readystate\n    }\n    get status() {\n\n    }\n    get statusText() {\n\n    }\n    get response() {\n\n    }\n    get responseText() {\n\n    }\n    get responseXML() {\n\n    }\n    open() {\n\n    }\n    send() {\n\n    }\n    abort() {\n\n    }\n    getResponseHeader() {\n\n    }\n    getAllResponseHeaders() {\n\n    }\n    overrideMimeType() {\n\n    }\n\n}\nXmlHttpRequest.UNSENT = 0;\nXmlHttpRequest.OPENED = 1;\nXmlHttpRequest.HEADERS_RECEIVED = 2;\nXmlHttpRequest.LOADING = 3;\nXmlHttpRequest.DONE = 4;\n\nmodule.exports = XmlHttpRequest\n\n\n\n// WEBPACK FOOTER //\n// ./src/wxadapter/XmlHttpRequst.js","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ws (ignored)\n// module id = 18\n// module chunks = 0 1 4 5","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// xhr2 (ignored)\n// module id = 19\n// module chunks = 0 1 2 3","import BaseConnection from './BaseConnection';\r\nimport './HttpConnection';\r\nimport './WebSocketConnection';\r\n\r\nmodule.exports = BaseConnection;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}